(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{487:function(e,t,l){e.exports=l.p+"assets/img/replace.6929333c.png"},488:function(e,t,l){e.exports=l.p+"assets/img/debug.4f3d7c16.png"},629:function(e,t,l){"use strict";l.r(t);var i=l(10),a=Object(i.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"opencore-debugging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#opencore-debugging"}},[e._v("#")]),e._v(" OpenCore Debugging")]),e._v(" "),t("p",[e._v("Needing to figure out why you're getting issues or stalling? Well, you've come to the right place:")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#file-swaps"}},[e._v("File Swaps")])]),t("li",[t("a",{attrs:{href:"#config-changes"}},[e._v("Config Changes")]),t("ul",[t("li",[t("a",{attrs:{href:"#misc-debug"}},[e._v("Misc > Debug")])])])]),t("li",[t("a",{attrs:{href:"#disabling-all-logging"}},[e._v("Disabling all logging")])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"file-swaps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-swaps"}},[e._v("#")]),e._v(" File Swaps")]),e._v(" "),t("p",[e._v("To start, make sure you're using either the "),t("code",[e._v("DEBUG")]),e._v(" or "),t("code",[e._v("NOOPT")]),e._v(" versions of OpenCore. This will provide much more info than the "),t("code",[e._v("RELEASE")]),e._v(" version, the specific files that need to be swapped:")]),e._v(" "),t("ul",[t("li",[e._v("EFI/BOOT/\n"),t("ul",[t("li",[t("code",[e._v("BOOTx64.efi")])])])]),e._v(" "),t("li",[e._v("EFI/OC/Drivers/\n"),t("ul",[t("li",[t("code",[e._v("OpenRuntime.efi")])]),e._v(" "),t("li",[t("code",[e._v("OpenCanopy.efi")]),e._v("(if you're using it)")])])]),e._v(" "),t("li",[e._v("EFI/OC/\n"),t("ul",[t("li",[t("code",[e._v("OpenCore.efi")])])])])]),e._v(" "),t("p",[t("img",{attrs:{src:l(487),alt:""}})]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Note")]),e._v(": Generally best to debug systems without OpenCanopy, if required make sure this file is from DEBUG else there will be virtually no debug information.")])]),e._v(" "),t("h2",{attrs:{id:"config-changes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#config-changes"}},[e._v("#")]),e._v(" Config Changes")]),e._v(" "),t("p",[e._v("Next, head to your config.plist and locate the "),t("code",[e._v("Misc")]),e._v(" > "),t("code",[e._v("Debug")]),e._v(" section, we have a couple entries we'll want to play with here:")]),e._v(" "),t("h3",{attrs:{id:"misc-debug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#misc-debug"}},[e._v("#")]),e._v(" Misc > Debug")]),e._v(" "),t("p",[e._v("Here we'll want to enable the following:")]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("AppleDebug")]),e._v(": YES")]),e._v(" "),t("ul",[t("li",[e._v("Provides much more debugging information, specifically relating to boot.efi and will also store the log to disk.")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("ApplePanic")]),e._v(": YES")]),e._v(" "),t("ul",[t("li",[e._v("This will allow kernel panics to be stored to disk, highly recommend keeping "),t("code",[e._v("keepsyms=1")]),e._v(" in boot-args to preserve as much info as possible.")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("DisableWatchdog")]),e._v(": YES")]),e._v(" "),t("ul",[t("li",[e._v("Disables the UEFI watchdog, used for when OpenCore is stalling on something non-critical.")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Target")]),e._v(": "),t("code",[e._v("67")]),e._v(" (or calculate one below)")]),e._v(" "),t("ul",[t("li",[e._v("Used for enabling different levels of debugging")])])])]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Value")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Comment")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x01")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable Logging")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x02")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable Onscreen debug")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x04")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable logging to Data Hub.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x08")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable serial port logging.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x10")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable UEFI variable logging.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x20")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable non-volatile UEFI variable logging.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x40")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Enable logging to file.")])])])]),e._v(" "),t("p",[e._v("To calculate the target, we can use a hex calculator and then convert it to decimal. For us we want to have our values on stored onto a .txt file for later viewing:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("0x01")]),e._v(" — Enable Logging")]),e._v(" "),t("li",[t("code",[e._v("0x02")]),e._v(" — Enable on-screen debug\n"),t("ul",[t("li",[e._v("Note this can heavily increase boot times on firmwares with poor GOP implementations")])])]),e._v(" "),t("li",[t("code",[e._v("0x40")]),e._v(" — Enable logging to file")])]),e._v(" "),t("p",[t("code",[e._v("0x01")]),e._v(" + "),t("code",[e._v("0x02")]),e._v(" + "),t("code",[e._v("0x40")]),e._v(" = "),t("code",[e._v("0x43")])]),e._v(" "),t("p",[t("code",[e._v("0x43")]),e._v(" converted to decimal becomes "),t("code",[e._v("67")])]),e._v(" "),t("p",[e._v("So we can set "),t("code",[e._v("Misc")]),e._v(" -> "),t("code",[e._v("Debug")]),e._v(" -> "),t("code",[e._v("Target")]),e._v(" -> "),t("code",[e._v("67")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("DisplayLevel")]),e._v(": "),t("code",[e._v("2147483714")]),e._v(" (or calculate one below)\n"),t("ul",[t("li",[e._v("Used for setting what is logged")])])])]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Value")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Comment")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x00000002")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_WARN in DEBUG, NOOPT, RELEASE.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x00000040")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_INFO in DEBUG, NOOPT.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x00400000")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_VERBOSE in custom builds.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("0x80000000")])]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("DEBUG_ERROR in DEBUG, NOOPT, RELEASE.")])])])]),e._v(" "),t("p",[e._v("A full list can be found in "),t("a",{attrs:{href:"https://github.com/tianocore/edk2/blob/UDK2018/MdePkg/Include/Library/DebugLib.h",target:"_blank",rel:"noopener noreferrer"}},[e._v("DebugLib.h"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("For us we just want the following:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("0x00000002")]),e._v(" — DEBUG_WARN in DEBUG, NOOPT, RELEASE.")]),e._v(" "),t("li",[t("code",[e._v("0x00000040")]),e._v(" — DEBUG_INFO in DEBUG, NOOPT.")]),e._v(" "),t("li",[t("code",[e._v("0x80000000")]),e._v(" — DEBUG_ERROR in DEBUG, NOOPT, RELEASE.")])]),e._v(" "),t("p",[e._v("Just like with "),t("code",[e._v("Target")]),e._v(", we use a hex calculator then convert to decimal:")]),e._v(" "),t("p",[t("code",[e._v("0x80000042")]),e._v(" Converted to decimal becomes "),t("code",[e._v("2147483714")])]),e._v(" "),t("p",[t("code",[e._v("Misc")]),e._v(" -> "),t("code",[e._v("Debug")]),e._v(" -> "),t("code",[e._v("DisplayLevel")]),e._v(" -> "),t("code",[e._v("2147483714")])]),e._v(" "),t("p",[e._v("Once done, your config.plist should look like this:")]),e._v(" "),t("p",[t("img",{attrs:{src:l(488),alt:""}})]),e._v(" "),t("h2",{attrs:{id:"disabling-all-logging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disabling-all-logging"}},[e._v("#")]),e._v(" Disabling all logging")]),e._v(" "),t("p",[e._v("To remove all file logging, and debug messages, simply swap out all your OpenCore files for those in RELEASE like we did before in "),t("a",{attrs:{href:"#file-swap"}},[e._v("File Swap")]),e._v(" section.")]),e._v(" "),t("p",[e._v("Lastly, to remove writing to disk set the following:")]),e._v(" "),t("ul",[t("li",[e._v("AppleDebug = "),t("code",[e._v("NO")])]),e._v(" "),t("li",[e._v("ApplePanic = "),t("code",[e._v("NO")])]),e._v(" "),t("li",[e._v("Target = "),t("code",[e._v("0")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);